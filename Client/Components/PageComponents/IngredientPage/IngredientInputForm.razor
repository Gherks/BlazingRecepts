@using BlazingRecept.Client.Components.Utilities;
@using BlazingRecept.Client.Utilities;
@using BlazingRecept.Shared.Dto

@inherits ComponentBase

<PageTitle>Ingredients</PageTitle>

<div class="card mb-2">
    <div class="card-body">
        <CollapsibleComponent CollapsedButtonText="Show ingredient form" ExposedButtonText="Hide ingredient form">
            <EditForm Model="_form" OnValidSubmit="@HandleValidFormSubmitted">
                <CustomValidation @ref="_customValidation" />
                <div class="form-floating mb-2">
                    <input type="text" id="name" name="name" class="form-control" @bind="_form.Name" @onblur="@(_ => HandleNameBlur())" placeholder="Name">
                    <label for="name">Name</label>
                    <ValidationMessage For="() => _form.Name" />
                </div>
                <div class="form-floating mb-2">
                    <input type="text" id="fat" name="fat" class="form-control" @bind="_form.Fat" placeholder="Fat">
                    <label for="fat">Fat</label>
                    <ValidationMessage For="() => _form.Fat" />
                </div>
                <div class="form-floating mb-2">
                    <input type="text" id="carbohydrates" name="carbohydrates" class="form-control" @bind="_form.Carbohydrates" placeholder="Carbohydrates">
                    <label for="carbohydrates">Carbohydrates</label>
                    <ValidationMessage For="() => _form.Carbohydrates" />
                </div>
                <div class="form-floating mb-2">
                    <input type="text" id="protein" name="protein" class="form-control" @bind="_form.Protein" placeholder="Protein">
                    <label for="protein">Protein</label>
                    <ValidationMessage For="() => _form.Protein" />
                </div>
                <div class="form-floating mb-2">
                    <input type="text" id="calories" name="calories" class="form-control" @bind="_form.Calories" placeholder="Calories">
                    <label for="calories">Calories</label>
                    <ValidationMessage For="() => _form.Calories" />
                </div>
                <div class="form-group mb-2">
                    <div class="col-lg-9">
                        <InputSelect id="category-selector" name="category-selector" class="form-control" @bind-Value="_form.IngredientCategoryDtoId">
                            <option value="@Guid.Empty">Choose a category...</option>
                            @if (_ingredientCategoryDtos != null)
                            {
                                foreach (IngredientCategoryDto ingredientCategoryDto in _ingredientCategoryDtos)
                                {
                                    <option value="@ingredientCategoryDto.Id">@ingredientCategoryDto.Name</option>
                                }
                            }
                        </InputSelect>
                        <ValidationMessage For="() => _form.IngredientCategoryDtoId" />
                    </div>
                </div>
                <button class="btn btn-primary" type="submit">Add ingredient</button>
            </EditForm>
        </CollapsibleComponent>
    </div>
</div>
