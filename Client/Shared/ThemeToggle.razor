@inject IJSRuntime JSRuntime

<button class="nav-link btn btn-link text-dark theme-toggle-btn" @onclick="ToggleTheme" title="Toggle theme">
    <span class="@ThemeIcon"></span>
</button>

@code {
    private string currentTheme = "light";
    private string ThemeIcon => currentTheme == "dark" ? "fa-solid fa-sun" : "fa-solid fa-moon";

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            currentTheme = await JSRuntime.InvokeAsync<string>("getTheme");
            StateHasChanged();
        }
    }

    private async Task ToggleTheme()
    {
        currentTheme = currentTheme == "light" ? "dark" : "light";
        await JSRuntime.InvokeVoidAsync("setTheme", currentTheme);
        StateHasChanged();
    }
}
